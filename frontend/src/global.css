html, body, #root {
  height: 100%;
  margin: 0;
  padding: 0;
  overflow: hidden; /* 禁止页面根滚动 */
  box-sizing: border-box;
}

/* 适配刘海 / 安全区域，防止顶部被裁剪。对多数桌面浏览器 env() 为 0px 不影响布局 */
:root {
  --app-safe-top: env(safe-area-inset-top, 0px);
  --header-height: 64px;
  --scrollbar-bg: #f1f3f5;
  --scrollbar-thumb: #b5bcc3;
  --scrollbar-thumb-hover: #9099a2;
}

/* 根布局容器：使用动态视口高度避免地址栏折叠导致高度抖动，同时下移安全区 */
.app-root-layout {
  padding-top: var(--app-safe-top);
  height: calc(100dvh - var(--app-safe-top));
  /* 避免内部再出现额外垂直滚动，交给子区域 */
  overflow: hidden !important;
}

/* 统一滚动区域类 */
.scroll-region {
  overflow: auto;
  overscroll-behavior: contain;
  scrollbar-gutter: stable; /* 让布局不因滚动条出现抖动 */
}

/* 自定义滚动条 (WebKit) - 默认隐藏，悬停或滚动时显示 */
.scroll-region::-webkit-scrollbar {
  width: 10px;
  height: 10px;
}
.scroll-region::-webkit-scrollbar-track {
  background: transparent;
}
.scroll-region::-webkit-scrollbar-thumb {
  background: transparent;
  border-radius: 6px;
  border: 2px solid transparent;
}
/* 悬停或滚动时显示滚动条 */
.scroll-region:hover::-webkit-scrollbar-thumb,
.scroll-region:active::-webkit-scrollbar-thumb {
  background: var(--scrollbar-thumb);
  border-color: var(--scrollbar-bg);
}
.scroll-region:hover::-webkit-scrollbar-track,
.scroll-region:active::-webkit-scrollbar-track {
  background: var(--scrollbar-bg);
}
.scroll-region::-webkit-scrollbar-thumb:hover {
  background: var(--scrollbar-thumb-hover);
}

/* Firefox 自定义 - 默认自动隐藏 */
.scroll-region {
  scrollbar-width: thin;
  scrollbar-color: transparent transparent;
}
.scroll-region:hover,
.scroll-region:active {
  scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-bg);
}

/* 默认不允许 Layout 产生额外滚动 */
.ant-layout {
  overflow: hidden;
}

/* 让 Layout.Sider 支持 flex 布局 */
.ant-layout-sider-children {
  display: flex;
  flex-direction: column;
  min-height: 0;
  height: 100%;
}

/* 全高度 Tabs - 让 Tabs 内容区域填满剩余高度并独立滚动 */
.full-height-tabs .ant-tabs-content-holder {
  flex: 1;
  min-height: 0;
  overflow: hidden;
}

.full-height-tabs .ant-tabs-content {
  height: 100%;
}

.full-height-tabs .ant-tabs-tabpane {
  height: 100%;
  overflow: hidden;
}

/* 允许三个区域自身滚动：
   1. 任务侧边栏 TaskSidebar 内部列表已自带 overflow:auto
   2. Chunk 列表容器
   3. 右侧内容区域 RightPanel 外层容器 */

/* ChunkList 外层容器：在 App.tsx 内会设置 overflow:auto */

/* RightPanel 外层容器：在 App.tsx 已设置 overflow:auto */

/* 隐藏 Mermaid 的错误提示弹窗 - 使用更精确的选择器 */
div[id^="d2h-"] {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
  height: 0 !important;
  overflow: hidden !important;
  position: absolute !important;
  pointer-events: none !important;
}
